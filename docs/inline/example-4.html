<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="../src/assets/image2D.png">
    <title>æ¼”ç¤º-4 | image2D - Drawing Two-Dimensional Pictures Using ECMAScript. </title>
    <meta name="Keywords" content="image2D canvas svg docs api" />
    <meta name="author" content="ä½ å¥½2007" />
    <meta name="email" content="2501482523@qq.com" />
    <script src="https://cdn.jsdelivr.net/npm/image2d"></script>
    <script>
        console.log(
            '\u001B[92mğŸ‘‰   Thank you for using (\u001B[94m https://github.com/hai2007/image2D \u001B[92m) as the Image2D Library! ğŸ‡\u001B[0m\n'
        );;

    </script>
</head>

<body>
        <a href="https://github.com/hai2007/image2D/blob/master/docs/inline/example-4.html" target="_blank">æŸ¥çœ‹æºç </a>
    <svg id='painter'></svg>
    <script>

        // è·å–ç”»ç¬”
        var painter = $$('#painter').attr({
            "width": 700,
            "height": 500
        }).painter();

        // ç»˜åˆ¶æ–¹æ³•
        var doit = function (datas) {

            // é¦–å…ˆæŸ¥æ‰¾é¡µé¢ä¸­çš„rect
            var imageObject = $$('rect');

            // ç„¶åæŠŠæ•°æ®ç»‘å®šåˆ°rectç»“ç‚¹ä¸Šï¼Œè¿”å›çš„æ˜¯æ›´æ–°å¯¹è±¡
            var update = imageObject.data(datas);

            // å› ä¸ºé¡µé¢ä¸­rectç»“ç‚¹å¯èƒ½ä¸å¤Ÿï¼Œä¸è¶³çš„è¿›è¡Œè¡¥å……
            var enter = update.enter('<rect>').appendTo('#painter');

            // å¤šä½™çš„åˆ é™¤
            update.exit().remove();

            // ä¸€åˆ‡å‡†å¤‡å¥½äº†ï¼Œè¿›è¡Œç»˜åˆ¶
            $$([imageObject, enter]).loop(function (data, index, target) {

                // ç»˜åˆ¶å›¾åƒ
                // dataæ˜¯å½“å‰ç»“ç‚¹å¯¹è±¡targetç»´æŠ¤çš„æ•°æ®ï¼Œindexæ˜¯å½“å‰ç»“ç‚¹å¯¹è±¡åºå·

                painter.bind(target).fillRect(index * (700 / datas.length) + 2, 500 - data, 700 / datas.length - 4, data);


            });
        };

        function startUp() {

            // å…ˆç¡®å®šæ¡ç›®ä¸ªæ•°
            var num = (Math.random() * 30).toFixed(0) - -5;

            var datas = [];
            for (let i = 0; i < num; i++) {
                datas.push(Math.random() * 500);
            }

            doit(datas);

        }

        startUp();
        setInterval(startUp, 1000);

    </script>
</body>

</html>
